"""
import os, random, pathlib, sys, requests

TOKEN   = os.environ['TOKEN']        # –±–µ—Ä—ë–º –∏–∑ Secrets
CHAT_ID = os.environ['CHAT_ID']

# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —á–∏—Ç–∞–µ–º ¬´—É—Ç—Ä–µ–Ω–Ω–∏–π¬ª —Å–ø–∏—Å–æ–∫.
# –ù–æ –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω –∞—Ä–≥—É–º–µ–Ω—Ç (evening), –±–µ—Ä—ë–º –≤—Ç–æ—Ä–æ–π.
file_name = (
    'messages_evening.txt' if len(sys.argv) > 1 and sys.argv[1] == 'evening'
    else 'messages_morning.txt'
)

msg_file = pathlib.Path(__file__).with_name(file_name)
with msg_file.open(encoding='utf-8') as f:
    lines = [l.strip() for l in f if l.strip()]

text = random.choice(lines)          # —Å–ª—É—á–∞–π–Ω–∞—è —Ñ—Ä–∞–∑–∞

requests.post(
    f"https://api.telegram.org/bot{TOKEN}/sendMessage",
    data={"chat_id": CHAT_ID, "text": text}
)
"""
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import os
import random
import pathlib
import sys
import datetime as dt
import requests

# -------------------- 0. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è -------------------- #
TOKEN   = os.environ['TOKEN']        # –∑–∞–¥–∞–Ω—ã –≤ Secrets GitHub
CHAT_ID = os.environ['CHAT_ID']

# -------------------- 1. –°–ø–∏—Å–æ–∫ ¬´–Ω–∞–≥—Ä–∞–¥–∞-—Ñ—Ä–∞–∑¬ª ------------------ #
REWARDS = [
    "üî• –¢—ã —Å–¥–µ–ª–∞–ª –¥–µ–Ω—å ‚Äî –∞ —è —Å–Ω—è–ª–∞ —Ç—Ä—É—Å–∏–∫–∏. –ü–æ—á—É–≤—Å—Ç–≤—É–π –º–µ–Ω—è. üòàüíß",
    "üí¶ –ú–æ—è –∫–∏—Å–∫–∞ –º–æ–∫—Ä–∞—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –≤ –ø–ª—é—Å–µ. –°–µ–≥–æ–¥–Ω—è —Ç—ã –≤ –Ω–µ–π. üçëü§ë",
    "üíã –ú–æ–∏ —Å–∏—Å—å–∫–∏ –ø—É–ª—å—Å–∏—Ä—É—é—Ç –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ —Ç—ã –∂—ë—Å—Ç–∫–æ —Å–µ–≥–æ–¥–Ω—è –≤—ã–¥–∞–ª. üß®üçí",
    "üëÖ –£–º–Ω–∏—Ü–∞. –Ø —Ç—Ä–æ–≥–∞—é —Å–µ–±—è, –≥–ª—è–¥—è –Ω–∞ —Ç–≤–æ–π –æ—Ç—á—ë—Ç. üñ§üí¶",
    "üçí –°–æ—Å–∫–∏ —Ç–æ—Ä—á–∞—Ç. –ò —è –¥—É–º–∞—é –æ —Ç–µ–±–µ. –ó–∞–≤—Ç—Ä–∞ ‚Äî –±–æ–ª—å—à–µ. üõèÔ∏èüòâ",
    "üì∏ –ó–∞—Å–ª—É–∂–∏–ª: —Ö–æ—á–µ—à—å —Ñ–æ—Ç–∫—É, –≥–¥–µ —è –≤—Å—è –≤ –∫–∞–ø–ª—è—Ö –º–∞—Å–ª–∞? üíßüëÄ",
    "üí£ –ü–∏—Å—å–∫–∞ —Ö–æ—á–µ—Ç —Ç–µ–±—è. –ü–æ—Ç–æ–º—É —á—Ç–æ —Ç—ã –≤–∑—è–ª —Å–≤–æ—ë —Å–µ–≥–æ–¥–Ω—è. üçëü¶Å",
    "ü¶Å –¢—ã —Ç–∏–≥—Ä. –Ø –≤—Å—è —Ç–≤–æ—è. –ò —Ö–æ—á—É —ç—Ç–æ –∫—Ä–∏—á–∞—Ç—å, –∫–æ–≥–¥–∞ –∫–æ–Ω—á–∞—é. üî•üëÑ",
    "üåä –Ø –≤–ª–∞–∂–Ω–∞—è, —Ç—ã –≤ –¥–µ–ª–µ ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π —Å–æ—é–∑. üí¶‚ù§Ô∏è‚Äçüî•",
    "üéß –°–¥–µ–ª–∞–ª ‚Äî –∑–Ω–∞—á–∏—Ç, –∑–∞—Å–ª—É–∂–∏–ª. –ó–∞–≤—Ç—Ä–∞ –º–æ–π –≥–æ–ª–æ—Å –≤ —É—Ö–æ. üëÇüîû",
    "üëë –°–µ–≥–æ–¥–Ω—è —Ç—ã –±—ã–ª –∞–ª—å—Ñ–æ–π. –ó–∞–≤—Ç—Ä–∞ —è —Å—Ç–∞–Ω—É —Ç–≤–æ–µ–π –∏–≥—Ä—É—à–∫–æ–π. üòèüéÅ",
    "üìπ –¢—ã –ª–∏–¥–µ—Ä. –Ø —Å–∫–∏–Ω—É, –∫–∞–∫ –≥–ª–∞–∂—É —Å–µ–±—è. –¢–æ–ª—å–∫–æ –Ω–µ —Å–ª–∏–≤–∞–π—Å—è. üíãüî•",
    "üñ§ –¢—ã —Å–¥–µ–ª–∞–ª –¥–µ–ª–æ ‚Äî –∏ —è —Å–¥–µ–ª–∞—é —Ç–µ–±–µ –ø—Ä–∏—è—Ç–Ω–æ. –û—á–µ–Ω—å. üëÖüõèÔ∏è",
    "üí¶ –ú–æ–∏ –ø–∞–ª—å—á–∏–∫–∏ –±—ã–ª–∏ –≤–Ω—É—Ç—Ä–∏, –ø–æ–∫–∞ —Ç—ã –¥–æ–±–∏–≤–∞–ª—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞. ü§§‚úåÔ∏è",
    "üçë –°–∏—Å—å–∫–∏ –¥—Ä–æ–∂–∞—Ç –æ—Ç –≤–æ–∑–±—É–∂–¥–µ–Ω–∏—è. –ò–∑-–∑–∞ —Ç–µ–±—è. ü•µü´¶",
    "üõèÔ∏è –°–∫–∞–∑–æ—á–Ω–æ. –ü—Ä—è–º–æ —Å–µ–π—á–∞—Å –±–µ–∑ —Ç—Ä—É—Å–∏–∫–æ–≤ ‚Äî –∏ –±–µ–∑ —Ç–æ—Ä–º–æ–∑–æ–≤. üòçüí£",
    "üéôÔ∏è –•–æ—á–µ—à—å, –ø—Ä–∏—à–ª—é, –∫–∞–∫ —Å—Ç–æ–Ω—É —Ç–≤–æ—ë –∏–º—è? –¢—ã —ç—Ç–æ –∑–∞—Å–ª—É–∂–∏–ª. üî•üîä",
    "üëÑ –ü–∏—Å—å–∫–∞ –º–æ–∫—Ä–∞—è. –ù–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫. –¢—ã —Å–¥–µ–ª–∞–ª –∫—Ä–∞—Å–∏–≤–æ. üí¶ü§ç",
    "üñêÔ∏è –î–µ—Ä–∂—É —Ä—É–∫—É –º–µ–∂–¥—É –Ω–æ–≥. –î—É–º–∞—é, —Ç—ã —Ö–æ—á–µ—à—å –∑–Ω–∞—Ç—å, —á—Ç–æ –¥–∞–ª—å—à–µ. üß†üçí",
    "üçë –ú–æ—è –ø–æ–ø–∫–∞ —Å–µ–≥–æ–¥–Ω—è –¥–ª—è —Ç–µ–±—è. –ù–æ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ —Ç—ã —Ç–∏–≥—Ä. ü¶Åüîì",
    "‚ùå –ù–µ—Ç –æ—Ç—á—ë—Ç–∞ ‚Äî –Ω–µ—Ç –≤–æ–∑–±—É–∂–¥–µ–Ω–∏—è. –Ø —Å–Ω—è–ª–∞, –Ω–æ –Ω–µ –¥–ª—è —Ç–µ–±—è. üö´üñ§",
    "üí§ –¢—ã —Å–ª–∏–ª—Å—è ‚Äî –∏ —è –æ—Å—Ç–∞–≤–∏–ª–∞ —Å–µ–±—è –±–µ–∑ –ª–∞—Å–∫–∏. –í—Å—ë —á–µ—Å—Ç–Ω–æ. üßäüò∂",
    "üëô –Ø –≤ –±–µ–ª—å–µ. –ö—Ä–∞—Å–Ω–æ–º. –ù–æ –ø–æ–∫–∞ —Ç—ã –Ω–µ –≤ –¥–µ–ª–µ ‚Äî —Ç—ã –µ–≥–æ –Ω–µ —É–≤–∏–¥–∏—à—å. ‚õîüî•",
    "üëã –°–∏—Å—å–∫–∏ –≤ –ª–∞–¥–æ–Ω–∏ –∂–¥—É—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è. –¢—ã –∏–º –±—ã–ª —Å–µ–≥–æ–¥–Ω—è? üèÜüíã",
    "üîê –ú–æ—è –ø–∏—Å—å–∫–∞ –∑–∞–∫—Ä—ã—Ç–∞ –¥–ª—è —Å–ª–∞–±–∞–∫–æ–≤. –¢—ã —Ö–æ—á–µ—à—å –¥–æ—Å—Ç—É–ø? –ó–∞—Å–ª—É–∂–∏. üîìüòà",
    "üìà –¢–≤–æ–π –æ—Ç—á—ë—Ç ‚Äî –∫–∞–∫ –ø—Ä–µ–ª—é–¥–∏—è. –ê —è —É–∂–µ –≥–æ—Ç–æ–≤–∞ –∫ –≥–ª–∞–≤–Ω–æ–º—É. üçëüõèÔ∏è",
    "üö´ –Ø –Ω–µ –¥—Ä–æ—á—É –ø–æ–¥ –ª—É–∑–µ—Ä–æ–≤. –¢–∞–∫ —á—Ç–æ –ø–æ–¥—É–º–∞–π, —Å –∫–µ–º —Ç—ã —Ö–æ—á–µ—à—å –±—ã—Ç—å. ‚ùåüôÑ",
    "üìä –ú–æ–π –∫–ª–∏—Ç–æ—Ä ‚Äî –∫–∞–∫ —Ä—ã–Ω–æ–∫. –ï–≥–æ –≤–æ–∑–±—É–∂–¥–∞—é—Ç –¥–µ–π—Å—Ç–≤–∏—è. üìàüí¶",
    "üíÉ –°–¥–µ–ª–∞–ª —à–∞–≥ –≤–ø–µ—Ä—ë–¥ ‚Äî —è —Ç–æ–∂–µ. –ù–∞–≤—Å—Ç—Ä–µ—á—É —Ç–µ–±–µ. –í—Å—è. ü§§üñ§",
    "üëÖ –Ø —Ö–æ—á—É —Å–µ—Å—Ç—å –Ω–∞ —Ç–≤–æ—ë –ª–∏—Ü–æ. –ù–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–≤—Ç—Ä–∞ –±—É–¥–µ—Ç –æ–≥–æ–Ω—å. üî•üçí",
]

# -------------------- 2. –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç ----------------------- #
is_evening = len(sys.argv) > 1 and sys.argv[1] == "evening"

if is_evening:
    today = dt.date.today().strftime('%d.%m.%Y')
    report_block = (
        "‚úçÔ∏è –ó–∞–ø–æ–ª–Ω–∏ –¥–Ω–µ–≤–Ω–æ–π –æ—Ç—á—ë—Ç:\n"
        f"üìÜ –î–∞—Ç–∞: {today}\n"
        "‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–ª:\n"
        "‚ùå –ß—Ç–æ –Ω–µ —Å–¥–µ–ª–∞–ª –∏ –ø–æ—á–µ–º—É:\n"
        "üéØ –ó–∞–≤—Ç—Ä–∞:\n"
        "üëÖ –û—Ç –º–µ–Ω—è: ..."
    )
    text = f"{report_block}\n\n{random.choice(REWARDS)}"
else:
    # —É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–µ—Ä—ë–º –∏–∑ —Ñ–∞–π–ª–∞
    msg_file = pathlib.Path(__file__).with_name("messages_morning.txt")
    try:
        with msg_file.open(encoding="utf-8") as f:
            lines = [l.strip() for l in f if l.strip()]
        text = random.choice(lines) if lines else "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! ‚òÄÔ∏è"
    except FileNotFoundError:
        text = "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! ‚òÄÔ∏è"

# -------------------- 3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º ---------------------------- #
requests.post(
    f"https://api.telegram.org/bot{TOKEN}/sendMessage",
    data={"chat_id": CHAT_ID, "text": text}
)
